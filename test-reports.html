<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test API B√°o C√°o</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f5f5f5;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 30px;
        }
        .test-section {
            margin-bottom: 30px;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .test-section h3 {
            color: #2c5aa0;
            margin-top: 0;
        }
        .test-form {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        .form-group {
            display: flex;
            flex-direction: column;
        }
        .form-group label {
            margin-bottom: 5px;
            font-weight: bold;
        }
        .form-group input, .form-group select {
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .btn {
            background-color: #007bff;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }
        .btn:hover {
            background-color: #0056b3;
        }
        .btn-success {
            background-color: #28a745;
        }
        .btn-success:hover {
            background-color: #1e7e34;
        }
        .result {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 4px;
            padding: 15px;
            margin-top: 15px;
            white-space: pre-wrap;
            font-family: monospace;
            max-height: 400px;
            overflow-y: auto;
        }
        .error {
            background-color: #f8d7da;
            border-color: #f5c6cb;
            color: #721c24;
        }
        .success {
            background-color: #d4edda;
            border-color: #c3e6cb;
            color: #155724;
        }
        .status {
            padding: 5px 10px;
            border-radius: 3px;
            font-size: 12px;
            font-weight: bold;
        }
        .status.success {
            background-color: #28a745;
            color: white;
        }
        .status.error {
            background-color: #dc3545;
            color: white;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üß™ Test API B√°o C√°o H·ªá Th·ªëng Qu·∫£n L√Ω Kho</h1>
        
        <!-- Test Overview -->
        <div class="test-section">
            <h3>üìä B√°o C√°o T·ªïng Quan</h3>
            <div class="test-form">
                <div class="form-group">
                    <label>T·ª´ ng√†y:</label>
                    <input type="date" id="overview-start" value="2024-01-01">
                </div>
                <div class="form-group">
                    <label>ƒê·∫øn ng√†y:</label>
                    <input type="date" id="overview-end" value="2024-12-31">
                </div>
                <div class="form-group">
                    <label>&nbsp;</label>
                    <button class="btn btn-success" onclick="testOverview()">Test Overview</button>
                </div>
            </div>
            <div id="overview-result" class="result" style="display: none;"></div>
        </div>

        <!-- Test Inventory by Warehouse -->
        <div class="test-section">
            <h3>üè¢ B√°o C√°o T·ªìn Kho Theo Kho</h3>
            <button class="btn btn-success" onclick="testInventoryByWarehouse()">Test Inventory by Warehouse</button>
            <div id="inventory-warehouse-result" class="result" style="display: none;"></div>
        </div>

        <!-- Test Inventory by Product -->
        <div class="test-section">
            <h3>üì¶ B√°o C√°o T·ªìn Kho Theo S·∫£n Ph·∫©m</h3>
            <div class="test-form">
                <div class="form-group">
                    <label>Kho:</label>
                    <select id="product-warehouse">
                        <option value="">T·∫•t c·∫£ kho</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Danh m·ª•c:</label>
                    <select id="product-category">
                        <option value="">T·∫•t c·∫£</option>
                        <option value="Electronics">Electronics</option>
                        <option value="Furniture">Furniture</option>
                        <option value="Books">Books</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Tr·∫°ng th√°i t·ªìn kho:</label>
                    <select id="stock-status">
                        <option value="">T·∫•t c·∫£</option>
                        <option value="low">Th·∫•p</option>
                        <option value="normal">B√¨nh th∆∞·ªùng</option>
                        <option value="high">Cao</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>&nbsp;</label>
                    <button class="btn btn-success" onclick="testInventoryByProduct()">Test Inventory by Product</button>
                </div>
            </div>
            <div id="inventory-product-result" class="result" style="display: none;"></div>
        </div>

        <!-- Test Transfer Report -->
        <div class="test-section">
            <h3>üîÑ B√°o C√°o Chuy·ªÉn Kho</h3>
            <div class="test-form">
                <div class="form-group">
                    <label>T·ª´ ng√†y:</label>
                    <input type="date" id="transfer-start" value="2024-01-01">
                </div>
                <div class="form-group">
                    <label>ƒê·∫øn ng√†y:</label>
                    <input type="date" id="transfer-end" value="2024-12-31">
                </div>
                <div class="form-group">
                    <label>Kho ngu·ªìn:</label>
                    <select id="transfer-warehouse">
                        <option value="">T·∫•t c·∫£ kho</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>&nbsp;</label>
                    <button class="btn btn-success" onclick="testTransferReport()">Test Transfer Report</button>
                </div>
            </div>
            <div id="transfer-result" class="result" style="display: none;"></div>
        </div>

        <!-- Test Low Stock Alert -->
        <div class="test-section">
            <h3>‚ö†Ô∏è B√°o C√°o T·ªìn Kho Th·∫•p</h3>
            <div class="test-form">
                <div class="form-group">
                    <label>Kho:</label>
                    <select id="low-stock-warehouse">
                        <option value="">T·∫•t c·∫£ kho</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>Gi·ªõi h·∫°n:</label>
                    <input type="number" id="low-stock-limit" value="20" min="1" max="100">
                </div>
                <div class="form-group">
                    <label>&nbsp;</label>
                    <button class="btn btn-success" onclick="testLowStockAlert()">Test Low Stock Alert</button>
                </div>
            </div>
            <div id="low-stock-result" class="result" style="display: none;"></div>
        </div>

        <!-- Test Storage Cost -->
        <div class="test-section">
            <h3>üí∞ B√°o C√°o Chi Ph√≠ L∆∞u Kho</h3>
            <div class="test-form">
                <div class="form-group">
                    <label>Kho:</label>
                    <select id="storage-cost-warehouse">
                        <option value="">T·∫•t c·∫£ kho</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>T·ª´ ng√†y:</label>
                    <input type="date" id="cost-start" value="2024-01-01">
                </div>
                <div class="form-group">
                    <label>ƒê·∫øn ng√†y:</label>
                    <input type="date" id="cost-end" value="2024-12-31">
                </div>
                <div class="form-group">
                    <label>&nbsp;</label>
                    <button class="btn btn-success" onclick="testStorageCost()">Test Storage Cost</button>
                </div>
            </div>
            <div id="storage-cost-result" class="result" style="display: none;"></div>
        </div>

        <!-- Test Warehouse Performance -->
        <div class="test-section">
            <h3>üìà B√°o C√°o Hi·ªáu Su·∫•t Kho</h3>
            <div class="test-form">
                <div class="form-group">
                    <label>T·ª´ ng√†y:</label>
                    <input type="date" id="performance-start" value="2024-01-01">
                </div>
                <div class="form-group">
                    <label>ƒê·∫øn ng√†y:</label>
                    <input type="date" id="performance-end" value="2024-12-31">
                </div>
                <div class="form-group">
                    <label>&nbsp;</label>
                    <button class="btn btn-success" onclick="testWarehousePerformance()">Test Performance</button>
                </div>
            </div>
            <div id="performance-result" class="result" style="display: none;"></div>
        </div>

        <!-- Test Trends -->
        <div class="test-section">
            <h3>üìä B√°o C√°o Xu H∆∞·ªõng</h3>
            <div class="test-form">
                <div class="form-group">
                    <label>Th·ªùi gian (ng√†y):</label>
                    <input type="number" id="trend-period" value="30" min="7" max="365">
                </div>
                <div class="form-group">
                    <label>Ch·ªâ s·ªë:</label>
                    <select id="trend-metric">
                        <option value="revenue">Doanh thu</option>
                        <option value="quantity">S·ªë l∆∞·ª£ng</option>
                        <option value="transactions">Giao d·ªãch</option>
                    </select>
                </div>
                <div class="form-group">
                    <label>&nbsp;</label>
                    <button class="btn btn-success" onclick="testTrends()">Test Trends</button>
                </div>
            </div>
            <div id="trends-result" class="result" style="display: none;"></div>
        </div>
    </div>

    <script>
        const API_BASE = 'http://localhost:3000/api';

        // Test Overview
        async function testOverview() {
            const startDate = document.getElementById('overview-start').value;
            const endDate = document.getElementById('overview-end').value;
            
            try {
                const params = new URLSearchParams();
                if (startDate) params.append('startDate', startDate);
                if (endDate) params.append('endDate', endDate);
                
                const response = await fetch(`${API_BASE}/reports/overview?${params}`);
                const data = await response.json();
                
                showResult('overview-result', data, response.ok);
            } catch (error) {
                showResult('overview-result', { error: error.message }, false);
            }
        }

        // Test Inventory by Warehouse
        async function testInventoryByWarehouse() {
            try {
                const response = await fetch(`${API_BASE}/reports/inventory-by-warehouse`);
                const data = await response.json();
                
                showResult('inventory-warehouse-result', data, response.ok);
            } catch (error) {
                showResult('inventory-warehouse-result', { error: error.message }, false);
            }
        }

        // Test Inventory by Product
        async function testInventoryByProduct() {
            const warehouseId = document.getElementById('product-warehouse').value;
            const category = document.getElementById('product-category').value;
            const stockStatus = document.getElementById('stock-status').value;
            
            try {
                const params = new URLSearchParams();
                if (warehouseId) params.append('warehouseId', warehouseId);
                if (category) params.append('category', category);
                if (stockStatus) params.append('stockStatus', stockStatus);
                
                const response = await fetch(`${API_BASE}/reports/inventory-by-product?${params}`);
                const data = await response.json();
                
                showResult('inventory-product-result', data, response.ok);
            } catch (error) {
                showResult('inventory-product-result', { error: error.message }, false);
            }
        }

        // Test Transfer Report
        async function testTransferReport() {
            const startDate = document.getElementById('transfer-start').value;
            const endDate = document.getElementById('transfer-end').value;
            const warehouseId = document.getElementById('transfer-warehouse').value;
            
            try {
                const params = new URLSearchParams();
                if (startDate) params.append('startDate', startDate);
                if (endDate) params.append('endDate', endDate);
                if (warehouseId) params.append('fromWarehouseId', warehouseId);
                
                const response = await fetch(`${API_BASE}/reports/transfer-report?${params}`);
                const data = await response.json();
                
                showResult('transfer-result', data, response.ok);
            } catch (error) {
                showResult('transfer-result', { error: error.message }, false);
            }
        }

        // Test Low Stock Alert
        async function testLowStockAlert() {
            const warehouseId = document.getElementById('low-stock-warehouse').value;
            const limit = document.getElementById('low-stock-limit').value;
            
            try {
                const params = new URLSearchParams();
                if (warehouseId) params.append('warehouseId', warehouseId);
                if (limit) params.append('limit', limit);
                
                const response = await fetch(`${API_BASE}/reports/low-stock-alert?${params}`);
                const data = await response.json();
                
                showResult('low-stock-result', data, response.ok);
            } catch (error) {
                showResult('low-stock-result', { error: error.message }, false);
            }
        }

        // Test Storage Cost
        async function testStorageCost() {
            const warehouseId = document.getElementById('storage-cost-warehouse').value;
            const startDate = document.getElementById('cost-start').value;
            const endDate = document.getElementById('cost-end').value;
            
            try {
                const params = new URLSearchParams();
                if (warehouseId) params.append('warehouseId', warehouseId);
                if (startDate) params.append('startDate', startDate);
                if (endDate) params.append('endDate', endDate);
                
                const response = await fetch(`${API_BASE}/reports/storage-cost?${params}`);
                const data = await response.json();
                
                showResult('storage-cost-result', data, response.ok);
            } catch (error) {
                showResult('storage-cost-result', { error: error.message }, false);
            }
        }

        // Test Warehouse Performance
        async function testWarehousePerformance() {
            const startDate = document.getElementById('performance-start').value;
            const endDate = document.getElementById('performance-end').value;
            
            try {
                const params = new URLSearchParams();
                if (startDate) params.append('startDate', startDate);
                if (endDate) params.append('endDate', endDate);
                
                const response = await fetch(`${API_BASE}/reports/warehouse-performance?${params}`);
                const data = await response.json();
                
                showResult('performance-result', data, response.ok);
            } catch (error) {
                showResult('performance-result', { error: error.message }, false);
            }
        }

        // Test Trends
        async function testTrends() {
            const period = document.getElementById('trend-period').value;
            const metric = document.getElementById('trend-metric').value;
            
            try {
                const params = new URLSearchParams();
                if (period) params.append('period', period);
                if (metric) params.append('metric', metric);
                
                const response = await fetch(`${API_BASE}/reports/trends?${params}`);
                const data = await response.json();
                
                showResult('trends-result', data, response.ok);
            } catch (error) {
                showResult('trends-result', { error: error.message }, false);
            }
        }

        // Helper function to show results
        function showResult(elementId, data, isSuccess) {
            const element = document.getElementById(elementId);
            element.style.display = 'block';
            element.className = `result ${isSuccess ? 'success' : 'error'}`;
            element.innerHTML = JSON.stringify(data, null, 2);
        }

        // Set default dates
        document.addEventListener('DOMContentLoaded', function() {
            const today = new Date();
            const lastMonth = new Date(today.getFullYear(), today.getMonth() - 1, today.getDate());
            
            const dateInputs = document.querySelectorAll('input[type="date"]');
            dateInputs.forEach(input => {
                if (input.id.includes('start')) {
                    input.value = lastMonth.toISOString().split('T')[0];
                } else if (input.id.includes('end')) {
                    input.value = today.toISOString().split('T')[0];
                }
            });
        });
    </script>
</body>
</html>
